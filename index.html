<!DOCTYPE html>
<html lang="de">
<Kopf>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=Gerätebreite, Anfangsmaßstab=1.0">
  <title>Punktezähler</title>
  <Stil>
    Körper {
      Schriftfamilie: Arial, serifenlos;
      Rand: 20px;
    }
    Etikett {
      Anzeige: Block;
      Rand: 10px 0 5px;
    }
    auswählen, eingeben {
      Breite: 100 %;
      Polsterung: 8px;
      Rand unten: 10px;
    }
    Taste {
      Polsterung: 10px;
      Hintergrundfarbe: #007BFF;
      Farbe: weiß;
      Rand: keiner;
      Cursor: Zeiger;
    }
    Schaltfläche: schweben {
      Hintergrundfarbe: #0056b3;
    }
    .Ergebnisse {
      Rand oben: 20px;
      Rahmen oben: 2px durchgezogen #ccc;
      Polsterung oben: 10px;
    }
    .versteckt {
      Anzeige: keine;
    }
    .Teilnehmer-Ergebnis {
      Rand unten: 10px;
    }
    .Teilnehmer-Ergebnis p {
      Rand: 0;
    }
    .Gesamtergebnis {
      Schriftgröße: 1,5em;
      Schriftstärke: fett;
      Rand oben: 20px;
    }
    hr {
      Rand oben: 20px;
      Rand unten: 20px;
      Rand: 0;
      Rahmen oben: 1px durchgezogen #ccc;
    }
    .whatsapp-button {
      Rand oben: 10px;
      Hintergrundfarbe: #25D366;
      Farbe: weiß;
      Rand: keiner;
      Polsterung: 8px;
      Schriftgröße: 14px;
      Cursor: Zeiger;
      Rahmenradius: 5px;
    }
    .whatsapp-button:hover {
      Hintergrundfarbe: #128C7E;
    }
  </Stil>
</Kopf>
<Text>
  <h1>Punktezähler</h1>
  
  <!-- Turnier -->
  <label for="turnier">Turnier</label>
  <input type="text" id="tournament" placeholder="Turniername">

  <!-- Name -->
  <label für="name">Name</label>
  <ID auswählen="Name">
    <option value="" deaktiviert selected>Bitte Name auswählen</option>
    <option>Paul Lüders</option>
    <option>Jan Grüning</option>
  </Auswählen>

  <!-- Runde -->
  <label for="round">Runde</label>
  <Eingabetyp="Nummer" ID="Runde" Wert="1" schreibgeschützt>

  <!-- Entfernung -->
  <label for="distance">Entfernung</label>
  <select id="Entfernung">
    <option value="bitte auswählen">bitte auswählen</option>
    <option value="10m">10 m</option>
    <option value="18m">18 m</option>
    <option value="20m">20 m</option>
    <option value="30m">30 m</option>
    <option value="40m">40 m</option>
    <option value="50m">50 m</option>
  </Auswählen>

  <!-- Auflage -->
  <label for="target">Auflage</label>
  <ID auswählen="Ziel">
    <option value="bitte auswählen">bitte auswählen</option>
    <option value="120cm">120 cm</option>
    <option value="80cm">80 cm</option>
    <option value="60cm">60 cm</option>
    <option value="40cm">40 cm</option>
  </Auswählen>

  <!-- Pfeile -->
  <label for="arrows">Pfeile</label>
  <ID auswählen="Pfeile">
    <option value="3">3</option>
    <option value="6">6</option>
  </Auswählen>

  <!-- Pfeil 1 bis Pfeil 6 -->
  <div id="Pfeilpunkte">
    <label for="arrow1">Pfeil 1</label>
    <Klasse auswählen="Pfeilpunkt" id="Pfeil1">
      <optionswert="0">0</option>
      <optionswert="1">1</option>
      <optionswert="2">2</option>
      <option value="3">3</option>
      <optionswert="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="X">X</option>
    </Auswählen>

    <label for="arrow2">Pfeil 2</label>
    <Klasse auswählen="Pfeilpunkt" id="Pfeil2">
      <optionswert="0">0</option>
      <optionswert="1">1</option>
      <optionswert="2">2</option>
      <option value="3">3</option>
      <optionswert="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="X">X</option>
    </Auswählen>

    <label for="arrow3">Pfeil 3</label>
    <Klasse auswählen="Pfeilpunkt" id="Pfeil3">
      <optionswert="0">0</option>
      <optionswert="1">1</option>
      <optionswert="2">2</option>
      <option value="3">3</option>
      <optionswert="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="X">X</option>
    </Auswählen>

    <!-- Pfeil 4 bis 6 -->
    <div id="extra-arrows" Klasse="versteckt">
      <label for="arrow4">Pfeil 4</label>
      <Klasse auswählen="Pfeilpunkt" id="Pfeil4">
        <optionswert="0">0</option>
        <optionswert="1">1</option>
        <optionswert="2">2</option>
        <option value="3">3</option>
        <optionswert="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="X">X</option>
      </Auswählen>

      <label for="arrow5">Pfeil 5</label>
      <Klasse auswählen="Pfeilpunkt" id="Pfeil5">
        <optionswert="0">0</option>
        <optionswert="1">1</option>
        <optionswert="2">2</option>
        <option value="3">3</option>
        <optionswert="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="X">X</option>
      </Auswählen>

      <label for="arrow6">Pfeil 6</label>
      <Klasse auswählen="Pfeilpunkt" id="Pfeil6">
        <optionswert="0">0</option>
        <optionswert="1">1</option>
        <optionswert="2">2</option>
        <option value="3">3</option>
        <optionswert="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="X">X</option>
      </Auswählen>
    </div>
  </div>

  <!-- Rundenpunkte -->
  <label>Rundenpunkte</label>
  <Eingabetyp="Nummer" ID="Rundenpunkte" Wert="0" schreibgeschützt>

  <!-- Gesamtpunkte -->
  <label>Gesamtpunkte</label>
  <Eingabetyp="Nummer" ID="Gesamtpunktzahl" Wert="0" schreibgeschützt>

  <!-- Schaltflächen -->
  <button id="submit">Absenden</button>
  <button id="clear">Formular leeren</button>

  <!-- Ergebnisse -->
  <div class="Ergebnisse">
    <h3>Ergebnisse der Teilnehmer:</h3>
    <div id="Teilnehmer-Ergebnisse"></div>
  </div>

  <!-- Gesamt X -->
  <div Klasse="total-result" id="total-x"></div>

  <Skript>
    // Referenzen zu den Elementen
    const formFields = ['Turnier', 'Name', 'Distanz', 'Ziel'];
    const roundPointsField = document.getElementById('round-points');
    const totalPointsField = document.getElementById('total-points');
    const participantsResults = document.getElementById('participants-results');
    const totalXDiv = document.getElementById('total-x');
    const submitButton = document.getElementById('senden');
    const clearButton = document.getElementById('clear');
    const arrowSelect = document.getElementById('Pfeile');
    const extraArrowsDiv = document.getElementById('extra-arrows');

    Lassen Sie totalPoints = 0;
    sei totalX = 0;
    sei currentRound = 1;

    // Lade gespeicherte Daten aus dem localStorage
    fenster.onload = funktion() {
      const gespeicherteData = JSON.parse(localStorage.getItem('tournamentData')) || {};
      
      // Setze gespeicherte Werte
      document.getElementById('tournament').value = gespeicherteDaten.tournament || '';
      document.getElementById('name').value = gespeicherteDaten.name || '';
      document.getElementById('Entfernung').value = gespeicherteDaten.Entfernung || '';
      document.getElementById('target').value = gespeicherteDaten.target || '';
      document.getElementById('round').value = gespeicherteDaten.round || 1;
      totalPoints = gespeicherteDaten.totalPoints || 0;
      totalX = gespeicherteDaten.totalX || 0;

      // Setze Teilnehmerergebnisse
      TeilnehmerErgebnisse.innerHTML = gespeicherteDaten.TeilnehmerErgebnisse || '';
      totalXDiv.innerHTML = `<strong>Gesamt X:</strong> ${totalX}`;

      // Wenn es gespeicherte Daten gibt, wird die Rundenzahl fortgesetzt
      aktuelleRunde = gespeicherteDaten.Runde || 1;
    };

    // Zeigt zusätzliche Pfeile, wenn 6 Pfeile gewählt sind
    arrowSelect.addEventListener('ändern', () => {
      wenn (PfeilAuswahl.Wert === '6') {
        extraArrowsDiv.classList.remove('hidden');
      } anders {
        extraArrowsDiv.classList.add('hidden');
      }
    });

    // Berechne die Punkte für die Runde
    Funktion Punkte berechnen() {
      const arrowPoints = document.querySelectorAll('.arrow-point');
      lass roundResult = 0;
      sei xCount = 0;

      Pfeilpunkte.fürJeden(Pfeil => {
        const-Wert = Pfeil.Wert === 'X'? 10: parseInt(Pfeil.Wert, 10);
        wenn (Pfeil.Wert === 'X') xCount++;
        wenn (!isNaN(Wert)) {
          rundesErgebnis += Wert;
        }
      });

      RundePunkteFeld.Wert = RundesErgebnis;
      Gesamtpunkte += Rundenergebnis;
      totalPointsField.value = totalPoints;
      GesamtX + = xAnzahl;
      totalXDiv.innerHTML = `<strong>Gesamt X:</strong> ${totalX}`;
    }

    // Ergebnisse absenden
    submitButton.addEventListener('klicken', () => {
      Punkte berechnen();

      const Teilnehmername = document.getElementById('name').value;
      const participantResult = document.createElement('div');
      participantResult.classList.add('Teilnehmerergebnis');
      memberResult.innerHTML = `
        <p><strong>${participantName}</strong> (Runde ${currentRound})</p>
        <p>Rundungspunkte: ${roundPointsField.value}</p>
        <p>Gesamtpunkte: ${totalPoints}</p>
        <button class="whatsapp-button" onclick="shareResult('${participantName}', ${currentRound}, ${roundPointsField.value}, ${totalPoints})">
          Ergebnis auf WhatsApp teilen
        </button>
      `;
      Teilnehmerergebnisse.appendChild(Teilnehmerergebnis);

      // Setze die Pfeilwerte zurück (Pfeil 1 bis 6)
      const arrowPoints = document.querySelectorAll('.arrow-point');
      Pfeilpunkte.fürJeden(Pfeil => Pfeil.Wert = '0');

      // Erhöhe die Rundenzahl
      aktuelleRunde++;
      document.getElementById('round').value = aktuelleRunde;

      // Speichere die Daten im localStorage
      const dataToSave = {
        Turnier: document.getElementById('tournament').value,
        Name: document.getElementById('name').value,
        Entfernung: document.getElementById('Entfernung').Wert,
        Ziel: document.getElementById('Ziel').Wert,
        Runde: aktuelleRunde,
        Gesamtpunkte: Gesamtpunkte,
        GesamtX: GesamtX,
        TeilnehmerErgebnisse: TeilnehmerErgebnisse.innerHTML
      };

      localStorage.setItem('tournamentData', JSON.stringify(dataToSave));
    });

    // Formular zurücksetzen
    clearButton.addEventListener('klicken', () => {
      localStorage.removeItem('Turnierdaten');
      fenster.standort.neuladen();
    });

    // WhatsApp teilen Funktion
    Funktion shareResult(Name, Runde, Rundenpunkte, Gesamtpunkte) {
      const message = `Ergebnis von ${name} (Runde ${round}):\nRundenpunkte: ${roundPoints}\nGesamtpunkte: ${totalPoints}`;
      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
      Fenster.öffnen(whatsappUrl, '_blank');
    }
  </Skript>
</body>
</html>
